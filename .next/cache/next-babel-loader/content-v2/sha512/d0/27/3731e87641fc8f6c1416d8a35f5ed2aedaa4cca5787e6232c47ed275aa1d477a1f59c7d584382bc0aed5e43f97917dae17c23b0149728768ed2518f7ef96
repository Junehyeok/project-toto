{"ast":null,"code":"import fs from \"fs\";\nexport default ((req, res) => {\n  if (req.method === \"GET\") {\n    try {\n      const todosBuffer = fs.readFileSync(\"data/todos.json\");\n      const todosString = todosBuffer.toString();\n\n      if (!todosString) {\n        res.statusCode = 200;\n        res.send([]);\n      }\n\n      const todos = JSON.parse(todosString);\n      res.statusCode = 200;\n      return res.send(todos);\n    } catch (e) {\n      console.log(e);\n      res.statusCode = 500;\n      res.send(e);\n    }\n\n    return res.send(\"hello Next!!!!\");\n  }\n\n  res.statusCode = 405;\n  console.log(res.statusCode);\n  return res.end();\n});","map":{"version":3,"sources":["C:/dev/next/next-todo/pages/api/todos.ts"],"names":["fs","req","res","method","todosBuffer","readFileSync","todosString","toString","statusCode","send","todos","JSON","parse","e","console","log","end"],"mappings":"AACA,OAAOA,EAAP,MAAe,IAAf;AAGA,gBAAe,CAACC,GAAD,EAAuBC,GAAvB,KAAkD;AAC7D,MAAGD,GAAG,CAACE,MAAJ,KAAe,KAAlB,EAAyB;AACrB,QAAI;AACA,YAAMC,WAAW,GAAGJ,EAAE,CAACK,YAAH,CAAgB,iBAAhB,CAApB;AACA,YAAMC,WAAW,GAAGF,WAAW,CAACG,QAAZ,EAApB;;AACA,UAAG,CAACD,WAAJ,EAAiB;AACbJ,QAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACAN,QAAAA,GAAG,CAACO,IAAJ,CAAS,EAAT;AACH;;AACD,YAAMC,KAAiB,GAAGC,IAAI,CAACC,KAAL,CAAWN,WAAX,CAA1B;AACAJ,MAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACA,aAAON,GAAG,CAACO,IAAJ,CAASC,KAAT,CAAP;AACH,KAVD,CAUE,OAAMG,CAAN,EAAS;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACAX,MAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACAN,MAAAA,GAAG,CAACO,IAAJ,CAASI,CAAT;AACH;;AAGD,WAAOX,GAAG,CAACO,IAAJ,CAAS,gBAAT,CAAP;AACH;;AACAP,EAAAA,GAAG,CAACM,UAAJ,GAAiB,GAAjB;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYb,GAAG,CAACM,UAAhB;AACA,SAAON,GAAG,CAACc,GAAJ,EAAP;AACJ,CAxBD","sourcesContent":["import { NextApiRequest, NextApiResponse } from \"next\";\r\nimport fs from \"fs\";\r\nimport { TodoType } from \"../../types/todo\";\r\n\r\nexport default (req : NextApiRequest, res : NextApiResponse ) => {\r\n    if(req.method === \"GET\") {\r\n        try {\r\n            const todosBuffer = fs.readFileSync(\"data/todos.json\");\r\n            const todosString = todosBuffer.toString();\r\n            if(!todosString) {\r\n                res.statusCode = 200;\r\n                res.send([]);\r\n            }\r\n            const todos: TodoType[] = JSON.parse(todosString);\r\n            res.statusCode = 200;\r\n            return res.send(todos);\r\n        } catch(e) {\r\n            console.log(e);\r\n            res.statusCode = 500;\r\n            res.send(e);\r\n        }\r\n\r\n\r\n        return res.send(\"hello Next!!!!\");\r\n    }\r\n     res.statusCode = 405;\r\n     console.log(res.statusCode);\r\n     return res.end();\r\n}"]},"metadata":{},"sourceType":"module"}